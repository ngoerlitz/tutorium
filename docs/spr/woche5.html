<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-spr/woche5" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Woche 5 | Tutoriumsunterlagen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ngoerlitz.github.io/tutorium/docs/spr/woche5"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Woche 5 | Tutoriumsunterlagen"><meta data-rh="true" name="description" content="Arten der Speicherverwaltung"><meta data-rh="true" property="og:description" content="Arten der Speicherverwaltung"><link data-rh="true" rel="icon" href="/tutorium/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ngoerlitz.github.io/tutorium/docs/spr/woche5"><link data-rh="true" rel="alternate" href="https://ngoerlitz.github.io/tutorium/docs/spr/woche5" hreflang="en"><link data-rh="true" rel="alternate" href="https://ngoerlitz.github.io/tutorium/docs/spr/woche5" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/tutorium/assets/css/styles.7e4d18c0.css">
<script src="/tutorium/assets/js/runtime~main.279a68bd.js" defer="defer"></script>
<script src="/tutorium/assets/js/main.c0391636.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tutorium/"><b class="navbar__title text--truncate">Tutoriumsunterlagen</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/tutorium/docs/category/systemprogrammierung">TODO</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ngoerlitz/tutorium" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/tutorium/docs/category/systemprogrammierung">Systemprogrammierung</a><button aria-label="Collapse sidebar category &#x27;Systemprogrammierung&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorium/docs/spr/intro">Einführung</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorium/docs/spr/woche1">Woche 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorium/docs/spr/woche4">Woche 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorium/docs/spr/woche5">Woche 5</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tutorium/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tutorium/docs/category/systemprogrammierung"><span itemprop="name">Systemprogrammierung</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Woche 5</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Woche 5 - Speicherverwaltung</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arten-der-speicherverwaltung">Arten der Speicherverwaltung<a href="#arten-der-speicherverwaltung" class="hash-link" aria-label="Direct link to Arten der Speicherverwaltung" title="Direct link to Arten der Speicherverwaltung">​</a></h2>
<ol>
<li>Verkettete Liste: Statusinformationen vor jedem Block (Große, frei oder belegt). Kein interner ¨
Verschnitt, dafur hoher externer Verschnitt, Fragmentierung, lange Suchlaufzeiten. ¨</li>
<li>Slab (hier Fokus Betriebssysteme, gibt es aber auch bei Programmiersprachen/Userspace): kmalloc() und Verwandte alloziieren Vielfache der Kachelgroße. Betriebssystem und ¨
Kerneltreiber nutzen jedoch haufig Strukturen die um Vielfache kleiner sind und meist nur ¨
kurzlebig: inodes, task structs, semaphores, etc. sodass Nutzung von kmalloc() sehr ineffizient.
Losung: Nutzung eines globalen Kernel Caching Allokators, welcher f ¨ ur Anfragen von OS und ¨
Drivern passende Blocke bereith ¨ alt. Somit schnelle Zugriffszeiten und perfekte Ausnutzung des ¨
Speichers (fast kein Verschnitt). Mogliche Nachteile, einsatzbedingt, siehe VL-Folie. ¨
Quelle mit guten Darstellungen (leicht veraltet):
<a href="http://www.secretmango.com/jimb/Whitepapers/slabs/slab.html" target="_blank" rel="noopener noreferrer">http://www.secretmango.com/jimb/Whitepapers/slabs/slab.html</a>.</li>
<li>Buddy Verfahren: auch hier interner Verschnitt groß, und sichtbar mehr Verwaltungsdaten als die anderen, wenig externer Verschnitt.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="speicherauslastung-und-verschnitt">Speicherauslastung und Verschnitt<a href="#speicherauslastung-und-verschnitt" class="hash-link" aria-label="Direct link to Speicherauslastung und Verschnitt" title="Direct link to Speicherauslastung und Verschnitt">​</a></h2>
<p><img decoding="async" loading="lazy" alt="speicher_verschnitt" src="/tutorium/assets/images/w5_verschnitt-eaaa31941c27f062e3e0f2176e008bdc.png" width="870" height="195" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="page-faults-seitenfehler">Page Faults (Seitenfehler)<a href="#page-faults-seitenfehler" class="hash-link" aria-label="Direct link to Page Faults (Seitenfehler)" title="Direct link to Page Faults (Seitenfehler)">​</a></h2>
<p>Page Fault: Programm versucht auf eine Seite zuzugreifen, welche gerade nicht im virtuellen
Adressraum des Prozesses ist (von MMU verwaltet). BS versucht die Seite zugreifbar zu machen
(laden, swap oder abort Programm).
Segmentation Fault: Unberechtigter Speicherzugriff (keine Rechte, Adresse nicht aligned).
Betriebssystem reagiert mit Signal an Prozess, z.B. SIGSEGV (unter UNIXartigen) fur¨ segmentation violation. Programm kann darauf mit eigenem Handler reagieren oder wird terminiert.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Information</div><div class="admonitionContent_BuS1"><p>Eine <code>NULL</code>-Pointer Referenz ist typischerweise ein invalid page fault resultierend in einem
Segmentation Fault.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtueller-speicher">Virtueller Speicher<a href="#virtueller-speicher" class="hash-link" aria-label="Direct link to Virtueller Speicher" title="Direct link to Virtueller Speicher">​</a></h2>
<ol>
<li>
<p><strong>Effiziente Nutzung des Speichers</strong>: In einem Computersystem ist der physische Speicher (RAM) oft begrenzt. Durch die Verwendung virtueller Adressen können Betriebssysteme den verfügbaren Speicher effizienter nutzen, indem sie Teile des Speichers auf der Festplatte (Swap-Speicher) als Erweiterung des physischen Speichers nutzen. So kann ein System mehr Programme oder größere Programme ausführen, als es der tatsächliche physische Speicher zulassen würde.</p>
</li>
<li>
<p><strong>Prozessisolierung</strong>: Jeder Prozess im System erhält seinen eigenen virtuellen Adressraum, der von den Adressräumen anderer Prozesse isoliert ist. Diese Isolierung verhindert, dass ein Prozess die Daten eines anderen Prozesses unerlaubt liest oder verändert, was zur Systemsicherheit und Stabilität beiträgt.</p>
</li>
<li>
<p><strong>Speicherschutz</strong>: Das Adressübersetzungsverfahren ermöglicht es dem Betriebssystem, Zugriffsrechte für bestimmte Speicherbereiche zu definieren. So kann beispielsweise verhindert werden, dass Anwendungssoftware Schreibzugriffe auf Speicherbereiche ausführt, die für das Betriebssystem oder andere kritische Prozesse reserviert sind.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adressübersetzungsverfahren">Adressübersetzungsverfahren<a href="#adressübersetzungsverfahren" class="hash-link" aria-label="Direct link to Adressübersetzungsverfahren" title="Direct link to Adressübersetzungsverfahren">​</a></h3>
<p>Das Adressübersetzungsverfahren wird genutzt um virtuelle in physische Speicheradressen zu übersetzen. Das folgende Diagramm illustriert die dafür genutzten Verfahren. Die elementaren Bausteine (1-5) werden folgend auch weiter erklärt.</p>
<p><img decoding="async" loading="lazy" alt="virt_addr_uebersetzung" src="/tutorium/assets/images/w5_virt_addr_uebersetzung-da53ba400ac282494851d36fbb113bed.png" width="1736" height="819" class="img_ev3q"></p>
<ol>
<li>Virtuelle Adresse: Die Virtuelle Adresse ist die, die der Prozess &quot;sieht&quot;/&quot;nutzt&quot;. Sobald der Prozess auf Speicher zugreifen möchte, muss die Adresse übersetzt werden um auf den physischen Speicher zugreifen zu können. Die virtuelle Adresse wird in zwei Teile, nämlich die <strong>Seitennummer</strong> sowie den <strong>Offset</strong> aufgeteilt.</li>
<li>Tabellenbasisadresse: Diese enthält die <em>physische Adresse</em> des ersten Eintrags der Seitentabelle.</li>
<li>Der Seitenindex, sowie Tabellenbasisadresse werden addiert um den entsprechenden Eintrag der Seitentabelle bestimmen zu können. Anders gesagt nutzen wir den Seitenindex als <em>Index</em> für die Seitentabelle. Ein Seitenindex von <code>0x2</code> würde also den zweiten Eintrag der Seitentabelle &quot;ansprechen&quot;.</li>
<li>Seitentabelle: Die Seitentabelle enthält die Kachelnummern der dazugehörigen Seitennummer im virtuellen Speicher. Zusätzlich dazu enthält es weitere <a href="#status-bits-der-seitentabelle">Status-Bits</a> um den aktuellen Zustand der Seite zu markieren.</li>
<li>Physischer Speicher: Im physischen Speicher sind die Daten letztendlich gespeichert. Dieses ist in Kacheln (engl. Page Frames) unterteilt. In modernen Architekturen entspricht die Größe der Kacheln oft <code>4096 Byte</code> (<code>4 kB</code>).</li>
</ol>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="beispiel">Beispiel<a href="#beispiel" class="hash-link" aria-label="Direct link to Beispiel" title="Direct link to Beispiel">​</a></h4>
<p>Wir schauen uns nun anhand des folgenden Beispiels die Handsimulation (bzw. das manuelle Übersetzen der Speicheradressen) an.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Erinnerung</div><div class="admonitionContent_BuS1"><p>Mit <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> Bits können wir <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> unterschiedliche Werte abbilden. Nämlich alle Zahlen im Intervall: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 2^n-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>.</p></div></div>
<p>Ordnen Sie mithilfe der Seitentabelle den folgenden virtuellen Adressen ihre physische Adresse zu.
Die Seitentabelle hat <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">2^4 = 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">16</span></span></span></span> Eintrage und liegt in einem (physischen) Speicher von <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">2^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span> Byte. Die Tabellenbasisadresse ist <code>0x9E</code>. Für das erste Beispiel, betrachten wir die virtuelle Adresse <code>0x2B</code>.</p>
<ol>
<li>
<p><strong>Bestimmung der Bitanzahl für Seitennummer und Offset</strong>:</p>
<p>Da die Seitentabelle <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">2^4 = 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">16</span></span></span></span> Einträge hat, benötigen wir <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bits, um jede Seite zu indizieren.</p>
<p>Die zu übersetzende Adresse <code>0x2B</code> lässt sich also in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">8</span></span></span></span> Bit (<code>0010 1011</code>) darstellen. Wir benötigen <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bit für die Seitennummer. Es bleiben entsprechend <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bit für den Offset übrig.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Erinnerung</div><div class="admonitionContent_BuS1"><p>Jedes &quot;Zeichen&quot; in Hexadezimal lässt sich als <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bits darstellen. So ist bspw. <code>0xA</code> = <code>1010</code>.</p></div></div>
</li>
<li>
<p><strong>Aufteilung der virtuellen Adresse <code>0x2B</code></strong>:</p>
<p><code>0x2B</code> = <code>0010 1011</code></p>
<p>Die ersten <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bits geben die Seitennummer an, und die letzten <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span> Bits stellen den Offset dar.</p>
<ul>
<li>Seitennummer = <code>0010</code> = <code>0x2</code></li>
<li>Offset = <code>1011</code> = <code>0xB</code></li>
</ul>
</li>
<li>
<p><strong>Ermittlung der Kachelnummer</strong>:</p>
<p>Die Tabellenbasisadresse beträgt <code>0x9E</code>. Um die Adresse in der Seitentabelle zu finden, die der Seitennummer entspricht, addieren wir den Seitenindex zur Tabellenbasisadresse: <code>0x9E + 0x2 = 0xA0</code>.
Wir suchen dann in der Seitentabelle nach dem Eintrag an der Adresse <code>0xA0</code>. Die Kachelnummer an dieser Adresse entspricht <code>0xF</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Hinweis</div><div class="admonitionContent_BuS1"><p>Wie oben angesprochen nutzen wir die Seitennummer um die Einträge der Seitentabelle zu indizieren. Ähnlich wie in einem C-Array können wir uns die Seitennummer als Array-Index vorstellen. Ausgehend von der Tabellenbasisadresse <code>0x9E</code>, ist <code>0x2</code> also der dritte (wir zählen ab <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span>) Eintrag in der Seitentabelle. Im Beispiel unten wäre das also <code>0xA2</code>.</p></div></div>
</li>
<li>
<p><strong>Zusammensetzung der physischen Adresse</strong>:</p>
<p>Die physische Adresse wird gebildet, indem wir die Kachelnummer (<code>0xF</code>) mit dem aus der virtuellen Adresse berechneten Offset (<code>0xB</code>) konkatenieren. Die physische Adresse entspricht also <code>0xFB</code>.</p>
</li>
</ol>
<table><thead><tr><th style="text-align:center">Speicheradresse</th><th style="text-align:center">Daten</th></tr></thead><tbody><tr><td style="text-align:center">0x9A</td><td style="text-align:center">0x4</td></tr><tr><td style="text-align:center">0x9B</td><td style="text-align:center">0x5</td></tr><tr><td style="text-align:center">0x9C</td><td style="text-align:center">0x2</td></tr><tr><td style="text-align:center">0x9D</td><td style="text-align:center">0x1</td></tr><tr><td style="text-align:center">0x9E</td><td style="text-align:center">0x0</td></tr><tr><td style="text-align:center">0xA0</td><td style="text-align:center">0xF</td></tr><tr><td style="text-align:center">0xA1</td><td style="text-align:center">0xA</td></tr><tr><td style="text-align:center">0xA2</td><td style="text-align:center">0xC</td></tr><tr><td style="text-align:center">0xA3</td><td style="text-align:center">0xD</td></tr></tbody></table>
<p>Abbildung 1: Beispielhafte Seitentabelle</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="status-bits-der-seitentabelle">Status-Bits der Seitentabelle<a href="#status-bits-der-seitentabelle" class="hash-link" aria-label="Direct link to Status-Bits der Seitentabelle" title="Direct link to Status-Bits der Seitentabelle">​</a></h3>
<p>Die Seitentabelle enthält, zusätzlich zur Kachelnummer, weitere Metadaten (Status-Bits) die vom Betriebssystem/der CPU genutzt werden. Ein paar Beispiele:</p>
<ul>
<li>Präsenzbit (P) - Ist die Seite im Hauptspeicher vorhanden?</li>
<li>Referenzbit (R) oder Access Bit (A) - Wurde auf die Seite bereits zugegriffen?</li>
<li>Modifikationsbit (M) oder Dirty Bit (D) - Wurde die Seite modifiziert (bspw. durch Schreiben)?</li>
</ul>
<p>Ein Beispiel für die Notwendigkeit dieser Bits:
Falls die Seite ausgelagert wird, muss das Betriebssystem wissen, ob die Änderungen im Speicher auf die Festplatte geschrieben werden müssen, oder ob die Seite verworfen werden kann. Dafür wird bspw. das Dirty Bit (D) genutzt.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ngoerlitz/tutorium/docs/spr/woche5.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tutorium/docs/spr/woche4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Woche 4</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#arten-der-speicherverwaltung" class="table-of-contents__link toc-highlight">Arten der Speicherverwaltung</a></li><li><a href="#speicherauslastung-und-verschnitt" class="table-of-contents__link toc-highlight">Speicherauslastung und Verschnitt</a></li><li><a href="#page-faults-seitenfehler" class="table-of-contents__link toc-highlight">Page Faults (Seitenfehler)</a></li><li><a href="#virtueller-speicher" class="table-of-contents__link toc-highlight">Virtueller Speicher</a><ul><li><a href="#adressübersetzungsverfahren" class="table-of-contents__link toc-highlight">Adressübersetzungsverfahren</a></li><li><a href="#status-bits-der-seitentabelle" class="table-of-contents__link toc-highlight">Status-Bits der Seitentabelle</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">TU Berlin</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://isis.tu-berlin.de" target="_blank" rel="noopener noreferrer" class="footer__link-item">ISIS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/khTF3sFfrK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fakultät IV Discord (Inoffiziell)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Nikolas Görlitz. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>